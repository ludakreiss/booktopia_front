<main class="content">
  <section class="book-info">
    <div class="cover-review-book">
      <div class="cover-book">
        <img [src]="book.book_cover" alt="" />
      </div>
      <div class="review-score flex items-center">
        <div class="stars">
          <ng-container *ngFor="let star of getStars(averageRatingValue)">
            <svg
              *ngIf="star.filled"
              class="w-8 h-8 text-yellow-300"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              fill="currentColor"
              viewBox="0 0 22 20"
            >
              <path
                d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"
              />
            </svg>
            <svg
              *ngIf="!star.filled"
              class="w-8 h-8 text-gray-300 dark:text-gray-500"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              fill="currentColor"
              viewBox="0 0 22 20"
            >
              <path
                d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"
              />
            </svg>
          </ng-container>
        </div>
        <div class="score">
          <p class="ms-2 font-bold text-gray-900 dark:text-white">
            {{averageRatingValue}}
          </p>
          <span
            class="w-1 h-1 mx-1.5 bg-gray-500 rounded-full dark:bg-gray-400"
          ></span>
          <a
            href="#"
            class="font-medium text-gray-900 underline hover:no-underline dark:text-white"
            >{{amountOfReviews}} reviews</a
          >
        </div>
      </div>
      <button
        type="button"
        class="focus:outline-none text-black bg-amber-600 hover:bg-yellow-500 focus:ring-4 focus:ring-yellow-500 font-light rounded-lg text-sm px-4 pt-2 me-2 mb-2 dark:focus:ring-yellow-900"
      >
        Read Later
        <svg
          class="8 h-6 text-gray-800 dark:text-white"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="currentColor"
          viewBox="0 0 20 30"
        >
          <path
            d="M13 20a1 1 0 0 1-.64-.231L7 15.3l-5.36 4.469A1 1 0 0 1 0 19V2a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v17a1 1 0 0 1-1 1Z"
          ></path>
        </svg>
      </button>
    </div>
    <div class="data-book">
      <div class="wrap">
        <h1 class="title display-4">{{book.title}}</h1>
        <h2 class="author">by {{book.author}}</h2>
      </div>
      <div class="genres">
        <div class="genre">Fantasy</div>
        <div class="genre">Fantasy</div>
        <div class="genre">Adventure</div>
        <div class="genre">Fantasy</div>
      </div>
      <div class="description">
        <app-read-more
          [text]="bookDescription ? bookDescription : ''"
        ></app-read-more>
      </div>
    </div>
  </section>
  <section class="review-info">
    <app-review-form
      *ngIf="currentUser"
      [bookId]="bookId"
      [userId]="userId"
    ></app-review-form>
    <div class="reviews-title py-6">
      <div class="data-title ml-3 flex justify-start">
        <svg
          class="w-4 h-4 mr-2 text-gray-600 dark:text-gray-300"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="currentColor"
          viewBox="0 0 18 14"
        >
          <path
            d="M6 0H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h4v1a3 3 0 0 1-3 3H2a1 1 0 0 0 0 2h1a5.006 5.006 0 0 0 5-5V2a2 2 0 0 0-2-2Zm10 0h-4a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h4v1a3 3 0 0 1-3 3h-1a1 1 0 0 0 0 2h1a5.006 5.006 0 0 0 5-5V2a2 2 0 0 0-2-2Z"
          ></path>
        </svg>
        REVIEWS
      </div>
    </div>
    <div *ngFor="let review of reviews" class="review-list">
      <hr class="h-0.5 mb-6 mx-4 bg-gray-200 border-0 dark:bg-gray-700" />
      <div class="review pb-3">
        <div class="review-side">
          <div class="avatar-container">
            <img
              class="w-20 h-20 p-1 rounded-full ring-4 ring-gray-300 dark:ring-gray-500"
              src=""
              alt="Bordered avatar"
            />
          </div>
          <div class="stars mt-4 ml-6">
            <ng-container *ngFor="let star of getStars(review.rating)">
              <svg
                *ngIf="star.filled"
                class="8 h-6 text-yellow-300"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                fill="currentColor"
                viewBox="0 0 22 20"
              >
                <path
                  d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"
                />
              </svg>
              <svg
                *ngIf="!star.filled"
                class="8 h-6 text-gray-300 dark:text-gray-500"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                fill="currentColor"
                viewBox="0 0 22 20"
              >
                <path
                  d="M20.924 7.625a1.523 1.523 0 0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534 1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 9.2a1.523 1.523 0 0 0 .387-1.575Z"
                />
              </svg>
            </ng-container>
          </div>
        </div>
        <div class="review-right-content">
          <div class="review-header">
            <div class="review-title text-3xl">{{review.title}}</div>
            <div class="reviewed-at">
              <span class="upper-case mr-2">REVIEWED AT:</span
              ><a>{{book.title}}</a>
            </div>
            <div class="review-meta">
              <span>
                <span class="upper-case">BY</span>
                <a>{{review.user?.name}}</a>
              </span>
              <span class="timing"
                >{{ review.created_at ? formatDate(review.created_at) : 'Unknown
                date' }}</span
              >
            </div>
          </div>
          <div class="review-content mt-3">
            <app-read-more
              [text]="review.review_text ? review.review_text: ''"
              [maxLength]="600"
            ></app-read-more>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>
